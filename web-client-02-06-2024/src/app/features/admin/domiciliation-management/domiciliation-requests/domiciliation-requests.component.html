<div class="content">
  <div class="grid grid-cols-12 gap-6 mt-8">
    <div class="col-span-12 lg:col-span-3 2xl:col-span-2">
      <h2 class="intro-y text-lg font-medium mr-auto mt-2">
        Domiciliation Requests
      </h2>
      <div class="intro-y box bg-success p-5 mt-6">
        <button
          type="button"
          routerLink="/chat"
          class="btn text-slate-600 dark:text-slate-300 w-full bg-white dark:bg-darkmode-300 dark:border-darkmode-300 mt-1"
        >
          bla bla ..
        </button>
        <div
          class="border-t border-white/10 dark:border-darkmode-400 mt-6 pt-6 text-white"
        >
          <a
            routerLink="/admin/domiciliation-requests"
            class="flex items-center px-3 py-2 rounded-md bg-white/10 dark:bg-darkmode-700 font-medium"
          >
            <i class="w-4 h-4 mr-2 fa-solid fa-inbox"></i> Inbox
          </a>
          <a
            routerLink="/admin/domiciliation-requests"
            class="flex items-center px-3 py-2 mt-2 rounded-md"
          >
            <i class="w-4 h-4 mr-2 fa-regular fa-circle-check"></i> bla bla
          </a>
          <a
            routerLink="/admin/domiciliation-requests"
            class="flex items-center px-3 py-2 mt-2 rounded-md"
          >
            <i class="w-4 h-4 mr-2 fa-solid fa-ban"></i> bla bla
          </a>
          <a
            routerLink="/admin/domiciliation-requests"
            class="flex items-center px-3 py-2 mt-2 rounded-md"
          >
            <i class="w-4 h-4 mr-2 fa-solid fa-clock-rotate-left"></i>
            Domiciliation Requests History
          </a>
        </div>
      </div>
    </div>
    <div class="col-span-12 lg:col-span-9 2xl:col-span-10">
      <div class="intro-y flex flex-col-reverse sm:flex-row items-center">
        <div class="w-full sm:w-auto relative mr-auto mt-3 sm:mt-0">
          <i
            class="fa-solid fa-magnifying-glass w-4 h-4 absolute my-auto inset-y-0 ml-3 left-0 z-10 text-slate-500"
          ></i>
          <input
            type="text"
            class="form-control w-full sm:w-64 box px-10"
            placeholder="Search mail"
          />
        </div>
        <div class="w-full sm:w-auto flex">
          <button class="btn btn-outline-success shadow-md mr-2">Print</button>
        </div>
      </div>

      <div class="intro-y inbox box mt-5">
        <div
          class="p-5 flex flex-col-reverse sm:flex-row text-slate-500 border-b border-slate-200/60"
        >
          <div
            class="flex items-center mt-3 sm:mt-0 border-t sm:border-0 border-slate-200/60 pt-5 sm:pt-0 mt-5 sm:mt-0 -mx-5 sm:mx-0 px-5 sm:px-0"
          >
            Filters
            <div class="dropdown ml-1" data-tw-placement="bottom-start">
              <button class="dropdown-toggle w-5 h-5 block">
                <i class="w-5 h-5 fa-solid fa-chevron-down"></i>
              </button>
              <div class="dropdown-menu w-32">
                <ul class="dropdown-content">
                  <li><a href="" class="dropdown-item">All</a></li>
                  <li><a href="" class="dropdown-item">None</a></li>
                  <li><a href="" class="dropdown-item">Accepted</a></li>
                  <li><a href="" class="dropdown-item">Rejected</a></li>
                  <li><a href="" class="dropdown-item">Validated</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="overflow-x-auto sm:overflow-x-visible">
          <div
            class="intro-y"
            *ngIf="
              domiciliationRequests && domiciliationRequests.length > 0;
              else noDomiciliationRequests
            "
          >
            <div
              *ngFor="let item of domiciliationRequests"
              class="inbox__item inbox__item--active inline-block sm:block text-slate-600 dark:text-slate-500 bg-slate-100 dark:bg-darkmode-400/70 border-b border-slate-200/60 dark:border-darkmode-400"
            >
              <div class="flex px-5 py-3">
                <div class="w-48 flex-none flex items-center mr-5">
                  <div class="w-6 h-6 flex-none image-fit relative ml-5">
                    <img
                      alt="user image"
                      class="rounded-full"
                      [src]="'data:image/png;base64,' + item.client.image"
                    />
                  </div>
                  <div class="inbox__item--sender truncate ml-3">
                    {{ item.client.firstName }} {{ item.client.lastName }}
                  </div>
                </div>

                <button class="text-success whitespace-nowrap ml-5"
                [routerLink]="['details', item.id]"
                >
                  <i class="w-4 h-4 mr-1 fa-solid fa-circle-info"></i> View
                  request
                </button>
                
                <div class="mt-5 inbox__item--time whitespace-nowrap ml-auto pl-10">
                  <div>{{ item.createdAt | date : "MMM d, y" }}</div>
                  <div class="text-slate-500 text-xs whitespace-nowrap mt-0.5">
                    {{ item.createdAt | date : "hh:mm a" }}
                  </div>
                </div>
                <span class="ml-auto">
                    <button
                    (click)="openAddModal(item.id)"
                      class="flex-none flex items-center justify-center btn btn-outline-success"
                    >
                      <i class="fa-solid fa-check"></i> &nbsp;Accept
                    </button>
                    <button
                    (click)="openOrCloseRejectModal(item.id)"
                      class="mt-3 flex-none flex items-center justify-center btn btn-secondary"
                    >
                      <i class="mr-2 fa-solid fa-xmark"></i> &nbsp;Reject
                    </button>
                  </span>
              </div>
            </div>
          </div>
          <ng-template #noDomiciliationRequests>
            <div
              class="intro-y col-span-12 overflow-auto 2xl:overflow-visible text-center"
            >
              <div class="alert alert-primary-soft mb-1">
                There is no domiciliation requests in your inbox..
              </div>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>
<div *ngIf="isAddModalOpen" class="modal-overlay">
  <div class="modal-content" [ngClass]="
  isDarkModeEnabled() ? 'modal-dark' : 'modal-light'
">
    <span class="close" (click)="openAddModal()">&times;</span>
    <h2 class="font-bold text-center mb-5">Accept Domiciliation Request</h2>
    <form (ngSubmit)="acceptRequest()" #fileForm="ngForm">
      <label for="fileInput">Upload the draft contract here</label>
      <input
      class="intro-x login__input form-control py-3 px-4 block mt-4"
      type="file"
      id="fileInput"
      name="file"
      (change)="onFileSelected($event)"
      required
    />
      <div class="intro-x mt-5 xl:mt-8 text-center xl:text-left">
        <button
        
        class="btn btn-outline-success mt-5  py-3 px-4 mr-5"
        type="submit"
        [disabled]="!fileForm.valid"
      >
        Upload
      </button>
        <button
        (click)="openAddModal()"
        class="btn btn-secondary mt-5  py-3 px-4 ml-auto"
        type="button"

      >
        Cancel
      </button>
      </div>
    </form>
  </div>
</div>
<div *ngIf="isRejectModalOpen" class="modal-overlay">
  <div class="modal-content">
    <span class="close" (click)="openOrCloseRejectModal()">&times;</span>
    <h2>Confirm Request rejection</h2>
    <p>Are you sure you want to reject this file?</p>
    <div class="text-center mt-5">
      <button class="btn btn-danger mr-3" (click)="rejectRequest()">Yes, reject</button>
      <button class="btn btn-secondary" (click)="openOrCloseRejectModal()">Cancel</button>
    </div>
  </div>
</div>